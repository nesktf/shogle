#pragma once

#include <shogle/render/common.hpp>

namespace shogle {

struct pnt_vertex {
  vec3 pos;
  vec3 normal;
  vec2 uv;
};

struct pn_vertex {
  vec3 pos;
  vec3 normal;
};

// clang-format off
constexpr inline pn_vertex pn_unindexed_cube_vert[] {
  // position               // normal
  {{-0.5f, -0.5f, -0.5f},   { 0.0f,  0.0f, -1.0f}},
  {{ 0.5f, -0.5f, -0.5f},   { 0.0f,  0.0f, -1.0f}}, 
  {{ 0.5f,  0.5f, -0.5f},   { 0.0f,  0.0f, -1.0f}}, 
  {{ 0.5f,  0.5f, -0.5f},   { 0.0f,  0.0f, -1.0f}}, 
  {{-0.5f,  0.5f, -0.5f},   { 0.0f,  0.0f, -1.0f}}, 
  {{-0.5f, -0.5f, -0.5f},   { 0.0f,  0.0f, -1.0f}}, 

  {{-0.5f, -0.5f,  0.5f},   { 0.0f,  0.0f,  1.0f}},
  {{ 0.5f, -0.5f,  0.5f},   { 0.0f,  0.0f,  1.0f}},
  {{ 0.5f,  0.5f,  0.5f},   { 0.0f,  0.0f,  1.0f}},
  {{ 0.5f,  0.5f,  0.5f},   { 0.0f,  0.0f,  1.0f}},
  {{-0.5f,  0.5f,  0.5f},   { 0.0f,  0.0f,  1.0f}},
  {{-0.5f, -0.5f,  0.5f},   { 0.0f,  0.0f,  1.0f}},

  {{-0.5f,  0.5f,  0.5f},   {-1.0f,  0.0f,  0.0f}},
  {{-0.5f,  0.5f, -0.5f},   {-1.0f,  0.0f,  0.0f}},
  {{-0.5f, -0.5f, -0.5f},   {-1.0f,  0.0f,  0.0f}},
  {{-0.5f, -0.5f, -0.5f},   {-1.0f,  0.0f,  0.0f}},
  {{-0.5f, -0.5f,  0.5f},   {-1.0f,  0.0f,  0.0f}},
  {{-0.5f,  0.5f,  0.5f},   {-1.0f,  0.0f,  0.0f}},

  {{ 0.5f,  0.5f,  0.5f},   { 1.0f,  0.0f,  0.0f}},
  {{ 0.5f,  0.5f, -0.5f},   { 1.0f,  0.0f,  0.0f}},
  {{ 0.5f, -0.5f, -0.5f},   { 1.0f,  0.0f,  0.0f}},
  {{ 0.5f, -0.5f, -0.5f},   { 1.0f,  0.0f,  0.0f}},
  {{ 0.5f, -0.5f,  0.5f},   { 1.0f,  0.0f,  0.0f}},
  {{ 0.5f,  0.5f,  0.5f},   { 1.0f,  0.0f,  0.0f}},

  {{-0.5f, -0.5f, -0.5f},   { 0.0f, -1.0f,  0.0f}},
  {{ 0.5f, -0.5f, -0.5f},   { 0.0f, -1.0f,  0.0f}},
  {{ 0.5f, -0.5f,  0.5f},   { 0.0f, -1.0f,  0.0f}},
  {{ 0.5f, -0.5f,  0.5f},   { 0.0f, -1.0f,  0.0f}},
  {{-0.5f, -0.5f,  0.5f},   { 0.0f, -1.0f,  0.0f}},
  {{-0.5f, -0.5f, -0.5f},   { 0.0f, -1.0f,  0.0f}},

  {{-0.5f,  0.5f, -0.5f},   { 0.0f,  1.0f,  0.0f}},
  {{ 0.5f,  0.5f, -0.5f},   { 0.0f,  1.0f,  0.0f}},
  {{ 0.5f,  0.5f,  0.5f},   { 0.0f,  1.0f,  0.0f}},
  {{ 0.5f,  0.5f,  0.5f},   { 0.0f,  1.0f,  0.0f}},
  {{-0.5f,  0.5f,  0.5f},   { 0.0f,  1.0f,  0.0f}},
  {{-0.5f,  0.5f, -0.5f},   { 0.0f,  1.0f,  0.0f}}
};

constexpr inline pnt_vertex pnt_unindexed_cube_vert[] {
  // position               // normal                // uv
  {{-0.5f, -0.5f, -0.5f},   { 0.0f,  0.0f, -1.0f},   {0.0f, 0.0f}},
  {{ 0.5f, -0.5f, -0.5f},   { 0.0f,  0.0f, -1.0f},   {1.0f, 0.0f}},
  {{ 0.5f,  0.5f, -0.5f},   { 0.0f,  0.0f, -1.0f},   {1.0f, 1.0f}},
  {{ 0.5f,  0.5f, -0.5f},   { 0.0f,  0.0f, -1.0f},   {1.0f, 1.0f}},
  {{-0.5f,  0.5f, -0.5f},   { 0.0f,  0.0f, -1.0f},   {0.0f, 1.0f}},
  {{-0.5f, -0.5f, -0.5f},   { 0.0f,  0.0f, -1.0f},   {0.0f, 0.0f}},

  {{-0.5f, -0.5f,  0.5f},   { 0.0f,  0.0f,  1.0f},   {0.0f, 0.0f}},
  {{ 0.5f, -0.5f,  0.5f},   { 0.0f,  0.0f,  1.0f},   {1.0f, 0.0f}},
  {{ 0.5f,  0.5f,  0.5f},   { 0.0f,  0.0f,  1.0f},   {1.0f, 1.0f}},
  {{ 0.5f,  0.5f,  0.5f},   { 0.0f,  0.0f,  1.0f},   {1.0f, 1.0f}},
  {{-0.5f,  0.5f,  0.5f},   { 0.0f,  0.0f,  1.0f},   {0.0f, 1.0f}},
  {{-0.5f, -0.5f,  0.5f},   { 0.0f,  0.0f,  1.0f},   {0.0f, 0.0f}},

  {{-0.5f,  0.5f,  0.5f},   {-1.0f,  0.0f,  0.0f},   {1.0f, 0.0f}},
  {{-0.5f,  0.5f, -0.5f},   {-1.0f,  0.0f,  0.0f},   {1.0f, 1.0f}},
  {{-0.5f, -0.5f, -0.5f},   {-1.0f,  0.0f,  0.0f},   {0.0f, 1.0f}},
  {{-0.5f, -0.5f, -0.5f},   {-1.0f,  0.0f,  0.0f},   {0.0f, 1.0f}},
  {{-0.5f, -0.5f,  0.5f},   {-1.0f,  0.0f,  0.0f},   {0.0f, 0.0f}},
  {{-0.5f,  0.5f,  0.5f},   {-1.0f,  0.0f,  0.0f},   {1.0f, 0.0f}},

  {{ 0.5f,  0.5f,  0.5f},   { 1.0f,  0.0f,  0.0f},   {1.0f, 0.0f}},
  {{ 0.5f,  0.5f, -0.5f},   { 1.0f,  0.0f,  0.0f},   {1.0f, 1.0f}},
  {{ 0.5f, -0.5f, -0.5f},   { 1.0f,  0.0f,  0.0f},   {0.0f, 1.0f}},
  {{ 0.5f, -0.5f, -0.5f},   { 1.0f,  0.0f,  0.0f},   {0.0f, 1.0f}},
  {{ 0.5f, -0.5f,  0.5f},   { 1.0f,  0.0f,  0.0f},   {0.0f, 0.0f}},
  {{ 0.5f,  0.5f,  0.5f},   { 1.0f,  0.0f,  0.0f},   {1.0f, 0.0f}},

  {{-0.5f, -0.5f, -0.5f},   { 0.0f, -1.0f,  0.0f},   {0.0f, 1.0f}},
  {{ 0.5f, -0.5f, -0.5f},   { 0.0f, -1.0f,  0.0f},   {1.0f, 1.0f}},
  {{ 0.5f, -0.5f,  0.5f},   { 0.0f, -1.0f,  0.0f},   {1.0f, 0.0f}},
  {{ 0.5f, -0.5f,  0.5f},   { 0.0f, -1.0f,  0.0f},   {1.0f, 0.0f}},
  {{-0.5f, -0.5f,  0.5f},   { 0.0f, -1.0f,  0.0f},   {0.0f, 0.0f}},
  {{-0.5f, -0.5f, -0.5f},   { 0.0f, -1.0f,  0.0f},   {0.0f, 1.0f}},

  {{-0.5f,  0.5f, -0.5f},   { 0.0f,  1.0f,  0.0f},   {0.0f, 1.0f}},
  {{ 0.5f,  0.5f, -0.5f},   { 0.0f,  1.0f,  0.0f},   {1.0f, 1.0f}},
  {{ 0.5f,  0.5f,  0.5f},   { 0.0f,  1.0f,  0.0f},   {1.0f, 0.0f}},
  {{ 0.5f,  0.5f,  0.5f},   { 0.0f,  1.0f,  0.0f},   {1.0f, 0.0f}},
  {{-0.5f,  0.5f,  0.5f},   { 0.0f,  1.0f,  0.0f},   {0.0f, 0.0f}},
  {{-0.5f,  0.5f, -0.5f},   { 0.0f,  1.0f,  0.0f},   {0.0f, 1.0f}}
};

constexpr inline pnt_vertex pnt_indexed_quad_vert[] {
  // position               // normal                // uv
  {{-0.5f, -0.5f,  0.0f},   { 0.0f,  0.0f,  1.0f},   {0.0f, 0.0f}},
  {{ 0.5f, -0.5f,  0.0f},   { 0.0f,  0.0f,  1.0f},   {1.0f, 0.0f}},
  {{ 0.5f,  0.5f,  0.0f},   { 0.0f,  0.0f,  1.0f},   {1.0f, 1.0f}},
  {{-0.5f,  0.5f,  0.0f},   { 0.0f,  0.0f,  1.0f},   {0.0f, 1.0f}},
};

constexpr inline pnt_vertex pnt_indexed_quad_vert_inv[] {
  // position               // normal                // uv
  {{-0.5f, -0.5f,  0.0f},   { 0.0f,  0.0f,  1.0f},   {0.0f, 1.0f}},
  {{ 0.5f, -0.5f,  0.0f},   { 0.0f,  0.0f,  1.0f},   {1.0f, 1.0f}},
  {{ 0.5f,  0.5f,  0.0f},   { 0.0f,  0.0f,  1.0f},   {1.0f, 0.0f}},
  {{-0.5f,  0.5f,  0.0f},   { 0.0f,  0.0f,  1.0f},   {0.0f, 0.0f}},
};

constexpr inline u32 pnt_indexed_quad_ind[] {
  0, 1, 2, // bottom right triangle
  0, 2, 3  // top left triangle
};
// clang-format on

template<u32 tex_extent>
constexpr auto missing_albedo_bitmap = [] {
  std::array<u8, 4u * tex_extent * tex_extent> out;
  const u8 pixels[]{
    0x00, 0x00, 0x00, 0xFF, // black
    0xFE, 0x00, 0xFE, 0xFF, // pink
    0x00, 0x00, 0x00, 0xFF, // black again
  };

  for (u32 i = 0; i < tex_extent; ++i) {
    const u8* start = i % 2 == 0 ? &pixels[0] : &pixels[4]; // Start row with a different color
    u32 pos = 0;
    for (u32 j = 0; j < tex_extent; ++j) {
      pos = (pos + 4) % 8;
      for (u32 k = 0; k < 4; ++k) {
        out[(4 * i * tex_extent) + (4 * j) + k] = start[pos + k];
      }
    }
  }

  return out;
}();

} // namespace shogle
